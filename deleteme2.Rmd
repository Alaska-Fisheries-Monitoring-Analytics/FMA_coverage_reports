---
title: "deletemetoo"
author: "Cara Rodgveller, Cindy Tribuzio, Matt Callahan"
date: "`r Sys.Date()`"
output: 
  word_document:
    reference_docx: "StckAssess-format2.docx"
params: 
  name: "sablefish"
  name_cap: "Sablefish"
  cas: 710
  obs: 203
  chapter: "19"
  appendix: "A"
---
$$
\textbf{Cara Rodgveller, Cindy Tribuzio, Matt Callahan}
$$

$$
\textbf{`r Sys.Date()`}
$$

# Introduction
This report summarizes the fishery-depenent data observer data that are available and inform the Gulf of Alaska (GOA) and Bering Sea/Aleutian Islands (BSAI) ‘r doc_name’ stock assessment. Logbook, eLandings and fishticket data are not included here. The format of this report is under development and should be considered a draft. Data are queired from the Alaska Regional Office Catch Accounting System (CAS) and queried through AKFIN. The results are based on total catch estimates and observer deployment information. Due to minor differences in observer strata assignments between CAS and what vessels log into the Observer Declare and Deploy System the total catch estimates may be slightly different from those values reported in the North Pacific Observer Program Annual Reports. Any differences are expected to be minor. Data prior to the 2013 Observer Program Restructure are not included in the analyses presented here due to structural changes in the North Pacific Observer Program.



\newpage

```{r warning=FALSE, message=FALSE, echo=FALSE,   fig.width=6,  fig.cap="Testcaption"}
library(ggplot2)
library(magrittr)
library(dplyr)
library(gridExtra)
library(flextable)


theme_doc<- function(base_size = 20, base_family = "Arial") { #this function sets the theme for the whole figure
  theme_bw(base_size = base_size, base_family = base_family) %+replace% #also note that this creates a bunch of font warnings that are not a real problem, I just haven't dealt with it yet
#  theme_bw()+
    theme(
      plot.title=element_text(size=20,colour='black',hjust = 0.5),
      plot.background=element_blank(),
      panel.grid.minor=element_blank(),
      panel.grid.major=element_line(color="grey90"),
      panel.border = element_blank(),
      panel.background = element_blank(),
      axis.line.x = element_line(colour='black'),
      axis.line.y = element_line(colour='black'),
      axis.text=element_text(size=20,colour='black'),
      axis.ticks.y=element_line(colour='black'),
      axis.ticks.x=element_blank(),
      axis.title.y=element_text(colour='black',angle=90),
      axis.title.x=element_text(colour='black'),
      legend.background=element_blank(),
      legend.text=element_text(colour='black',size=20),
      legend.title=element_text(colour='black',size=20),
      legend.position = "none",
      strip.background=element_blank(),
      strip.text=element_text(size=20,colour='black'),
      axis.text.x = element_text(angle = 45, hjust=1, vjust=1.1)
    )
}
dummy<-read.csv("OBS_rates.csv")
p1<-ggplot(data=dummy, aes(x=Year, y=Actual, color=Strata))+
         geom_line()+
  theme_doc()
p2<-ggplot(data=dummy, aes(x=Year, y=Expected, color=Strata))+
         geom_line()+
  theme_doc()
grid.arrange(p1,p2, nrow=1)
```


\newpage

```{r warning=FALSE, message=FALSE, echo=FALSE }

# Create a flextable
table_caption=paste0("Table ", params$chapter, ".", params$appendix, ".2. Count of  ",params$name, " lengths measured by at-sea and port observers by area, year, and gear. Gear types include pelagic trawl (PTR), non-pelagic trawl (NPT), pot (POT), or hook and line (HAL). Areas include the Aleutian Islands (AI), Bering Sea (BS), Western Gulf of Alaska (WGOA), Central Gulf of Alaska (CGOA), West Yakutat (WY), and East Yakutat (EY).")
dummy%>%
  flextable() %>%
  fontsize(size=11, part="all")%>%
  add_header_lines(values = table_caption) %>%
  font(part = "all", fontname = "New Times Roman") %>%
  align(#j = c("NPT","HAL", "POT", "PTR", "HAL", "Sum"), 
    align = "right", part="body") %>%
  align(#j = c("NPT","HAL", "POT", "PTR", "HAL", "Sum"), 
    align = "left", part="head") %>%
  line_spacing(space = 0.25, part = "body")%>%
  border(part = "head", i = c(1:length(table_caption)),
         border = list("width" = 0, color = "black", style = "solid"))
  # set_caption(
  #   as_paragraph(
  #     as_chunk(paste0("Table ", params$chapter, ".", params$appendix, ".2. Count of  ",params$name, " lengths measured by at-sea and port observers by area, year, and gear. Gear types include pelagic trawl (PTR), non-pelagic trawl (NPT), pot (POT), or hook and line (HAL). Areas include the Aleutian Islands (AI), Bering Sea (BS), Western Gulf of Alaska (WGOA), Central Gulf of Alaska (CGOA), West Yakutat (WY), and East Yakutat (EY)."), props=fp_text_default(align="left"))))
```


```{r warning=FALSE, message=FALSE, echo=FALSE, fig.asp=1.5, out.width="99%",out.height="99%",  fig.cap="Testcaption2"}
p3<-ggplot(data=dummy, aes(x=Year, y=Actual, color=Strata))+
         geom_line()+
  theme_doc()
p4<-ggplot(data=dummy, aes(x=Year, y=Expected, color=Strata))+
         geom_line()+
  theme_doc()
grid.arrange(p3,p4, nrow=1)
```



```{r warning=FALSE, message=FALSE, echo=FALSE, fig.width=6, fig.cap="Testcaption3"}
ggplot(data=dummy, aes(x=Year, y=Actual, color=Strata))+
         geom_line()+
  theme_doc()

```

\newpage

```{r warning=FALSE, message=FALSE, echo=FALSE, fig.width=6.5,  fig.cap="Testcaption4"}
ggplot(data=dummy, aes(x=Year, y=Actual, color=Strata))+
         geom_line()+
  theme_doc()

```


\newpage

```{r warning=FALSE, message=FALSE, echo=FALSE, fig.width=7,  fig.cap="Testcaption5"}
ggplot(data=dummy, aes(x=Year, y=Actual, color=Strata))+
         geom_line()+
  theme_doc()

```
